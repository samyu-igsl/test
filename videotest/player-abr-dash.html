<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>AVC/H264 Video Adaptive Streaming (DASH)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="https://cdn.plyr.io/3.7.3/plyr.css" />
	
	<script src="https://cdn.plyr.io/3.7.3/plyr.js"></script>
	<script src="dash.all.min.js"></script>
  </head>

  <body>
    <div class="grid">
      <header>
        <h1>AVC/H264 Video Adaptive Streaming (DASH)</h1>
      </header>
      <main>
		<br><br>
        <div id="container">
          <video
            controls
            crossorigin
            playsinline
            id="player"
          >
          </video>
        </div>

      </main>
    </div>

	<script>
	/*
	  var player = new Plyr('#player', {
		'controls': ['play-large', 'play', 'progress', 'current-time', 'mute', 'volume', 'captions', 'settings', 'quality', 'airplay', 'fullscreen'],
		'quality1': {
		  default: 720,
		  options: [1080, 720, 480]
		}
	  });
	  */
	  var video_url = 'ABR/OUTPUT.mpd';
	  
      dash = dashjs.MediaPlayer().create();
	  
        dash.updateSettings({
            streaming: {
                abr: {
					useDefaultABRRules: true,
                    initialBitrate: { audio: -1, video: -1 },
                    autoSwitchBitrate: { audio: false, video: true }
                }
            }
        });
	  
      video = document.querySelector('#player');

	  dash.initialize(video, video_url, true);
	  plyr.setup(video, {
	    'controls': ['play-large', 'play', 'progress', 'current-time', 'mute', 'volume', 'captions', 'settings', 'quality', 'airplay', 'fullscreen'],
		'quality1': {
		  default: 720,
		  options: [1080, 720, 480]
		});

	</script>
  </body>
</html>

